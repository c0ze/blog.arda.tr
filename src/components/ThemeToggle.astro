---
---

<button
  id="theme-toggle"
  class="flex items-center justify-center w-9 h-9 rounded-full bg-secondary border border-border text-muted-foreground hover:bg-accent hover:text-accent-foreground transition-colors"
  aria-label="Toggle theme"
>
  <span id="theme-icon-dark" class="hidden">
    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"/>
    </svg>
  </span>
  <span id="theme-icon-light" class="hidden">
    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="4"/>
      <path d="M12 2v2"/>
      <path d="M12 20v2"/>
      <path d="m4.93 4.93 1.41 1.41"/>
      <path d="m17.66 17.66 1.41 1.41"/>
      <path d="M2 12h2"/>
      <path d="M20 12h2"/>
      <path d="m6.34 17.66-1.41 1.41"/>
      <path d="m19.07 4.93-1.41 1.41"/>
    </svg>
  </span>
  <span id="theme-icon-dracula" class="hidden">
    <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z" />
      <path d="M8 14l2-4 2 4" />
      <path d="M12 14l2-4 2 4" />
    </svg>
  </span>
</button>

<script is:inline>
  const themes = ['dark', 'light', 'dracula'];

  function getTheme() {
    return localStorage.getItem('theme') || 'dark';
  }

  function setTheme(theme) {
    // Remove all theme classes
    document.documentElement.classList.remove('dark', 'light', 'dracula');
    // Add new theme class
    document.documentElement.classList.add(theme);
    localStorage.setItem('theme', theme);
    updateIcon(theme);
  }

  function updateIcon(theme) {
    document.getElementById('theme-icon-dark')?.classList.add('hidden');
    document.getElementById('theme-icon-light')?.classList.add('hidden');
    document.getElementById('theme-icon-dracula')?.classList.add('hidden');
    document.getElementById(`theme-icon-${theme}`)?.classList.remove('hidden');
  }

  function cycleTheme() {
    const current = getTheme();
    const currentIndex = themes.indexOf(current);
    const nextIndex = (currentIndex + 1) % themes.length;
    setTheme(themes[nextIndex]);
  }

  // Initialize
  updateIcon(getTheme());

  // Add click handler
  document.getElementById('theme-toggle')?.addEventListener('click', cycleTheme);
</script>
